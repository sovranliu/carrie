<?xml version="1.0" encoding="UTF-8"?>
<world>
	<clusters>
		<cluster name="Contract" table="Demo.Contract">
			<method name="query" sql="UPDATE Demo.Contract SET Status = 0 WHERE Type = {0}" />
			<method name="cancel" type="LOAD" sql="UPDATE Demo.Contract SET Status = 0 WHERE #if {1} > 0 #then ID = {0} AND #end Version = {Version}" />
			<method name="approval" sp="Demo.SP_Approval({0}, {1})" />
			<manager>
				<method name="create" type="CREATE" sql="INSERT INTO " />
			</manager>
		</cluster>
		<cluster name="Order" table="Demo.Order" class="com.slfuture.demo.Order">
			<manager class="com.slfuture.demo.OrderManager">
				<method name="create" type="CREATE" sql="INSERT INTO " />
			</manager>
		</cluster>
	</clusters>
	<relations>
		<relation name="Orders" self="Contract" target="Order" mode="1-N">
			<condition type="EQUAL" field="ID" value="ContractID" />
		</relation>
		<relation self="FormalOrder" target="Contract" mode="1">
			<presuppose datatype="int" not="true" type="EQUAL" field="ContractID" value="0" />
			<condition type="EQUAL" field="ContractID" value="ID" />
		</relation>
	</relations>
</world>
